<head>
  <!-- Load plotly.js into the DOM -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script
    src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
    crossorigin="anonymous"
  />
</head>

<body>
  <h1 class="m-3">Predevelop display stacks</h1>
  <div class="row">
    <div id="graphDiv" class="col-md-9" style="height: 35rem; width: 100%">
      <!-- Plotly chart will be drawn inside this DIV -->
    </div>
    <div class="col-md-3 mt-5 pt-5">
      <legend>Stack options</legend>
      <!-- <input type="checkbox" checked id="check-all" />
      <span>Check all</span>
      <hr /> -->
      <div id="check-box-area"></div>
    </div>
  </div>
</body>

<script>
  total_result = {
    result_0: [
      {
        x: [0, 0, 20, 20, 0, 0, 20, 20],
        y: [0, 20, 0, 20, 0, 20, 0, 20],
        z: [0, 0, 0, 0, 20, 20, 20, 20],
      },
    ],
    result_1: [
      {
        x: [20, 20, 25, 25, 20, 20, 25, 25],
        y: [0, 20, 0, 20, 0, 20, 0, 20],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [20, 20, 25, 25, 20, 20, 25, 25],
        y: [0, 15, 0, 15, 0, 15, 0, 15],
        z: [13, 13, 13, 13, 19, 19, 19, 19],
      },

      {
        x: [20, 20, 23, 23, 20, 20, 23, 23],
        y: [0, 5, 0, 5, 0, 5, 0, 5],
        z: [19, 19, 19, 19, 20, 20, 20, 20],
      },

      {
        x: [23, 23, 25, 25, 23, 23, 25, 25],
        y: [0, 2, 0, 2, 0, 2, 0, 2],
        z: [19, 19, 19, 19, 20, 20, 20, 20],
      },

      {
        x: [23, 23, 25, 25, 23, 23, 25, 25],
        y: [2, 4, 2, 4, 2, 4, 2, 4],
        z: [19, 19, 19, 19, 20, 20, 20, 20],
      },

      {
        x: [20, 20, 23, 23, 20, 20, 23, 23],
        y: [5, 10, 5, 10, 5, 10, 5, 10],
        z: [19, 19, 19, 19, 20, 20, 20, 20],
      },

      {
        x: [23, 23, 25, 25, 23, 23, 25, 25],
        y: [5, 7, 5, 7, 5, 7, 5, 7],
        z: [19, 19, 19, 19, 20, 20, 20, 20],
      },

      {
        x: [23, 23, 25, 25, 23, 23, 25, 25],
        y: [7, 9, 7, 9, 7, 9, 7, 9],
        z: [19, 19, 19, 19, 20, 20, 20, 20],
      },

      {
        x: [20, 20, 23, 23, 20, 20, 23, 23],
        y: [10, 15, 10, 15, 10, 15, 10, 15],
        z: [19, 19, 19, 19, 20, 20, 20, 20],
      },

      {
        x: [20, 20, 23, 23, 20, 20, 23, 23],
        y: [15, 20, 15, 20, 15, 20, 15, 20],
        z: [13, 13, 13, 13, 14, 14, 14, 14],
      },

      {
        x: [20, 20, 23, 23, 20, 20, 23, 23],
        y: [15, 20, 15, 20, 15, 20, 15, 20],
        z: [14, 14, 14, 14, 15, 15, 15, 15],
      },

      {
        x: [20, 20, 23, 23, 20, 20, 23, 23],
        y: [15, 20, 15, 20, 15, 20, 15, 20],
        z: [15, 15, 15, 15, 16, 16, 16, 16],
      },

      {
        x: [20, 20, 23, 23, 20, 20, 23, 23],
        y: [15, 20, 15, 20, 15, 20, 15, 20],
        z: [16, 16, 16, 16, 17, 17, 17, 17],
      },

      {
        x: [20, 20, 23, 23, 20, 20, 23, 23],
        y: [15, 20, 15, 20, 15, 20, 15, 20],
        z: [17, 17, 17, 17, 18, 18, 18, 18],
      },
    ],
    result_2: [
      {
        x: [25, 25, 30, 30, 25, 25, 30, 30],
        y: [0, 13, 0, 13, 0, 13, 0, 13],
        z: [0, 0, 0, 0, 10, 10, 10, 10],
      },

      {
        x: [25, 25, 30, 30, 25, 25, 30, 30],
        y: [0, 13, 0, 13, 0, 13, 0, 13],
        z: [10, 10, 10, 10, 20, 20, 20, 20],
      },
    ],
    result_3: [
      {
        x: [25, 25, 30, 30, 25, 25, 30, 30],
        y: [13, 19, 13, 19, 13, 19, 13, 19],
        z: [0, 0, 0, 0, 15, 15, 15, 15],
      },
    ],
    result_4: [
      {
        x: [0, 0, 10, 10, 0, 0, 10, 10],
        y: [20, 25, 20, 25, 20, 25, 20, 25],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [0, 0, 8, 8, 0, 0, 8, 8],
        y: [20, 25, 20, 25, 20, 25, 20, 25],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_5: [
      {
        x: [10, 10, 20, 20, 10, 10, 20, 20],
        y: [20, 25, 20, 25, 20, 25, 20, 25],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [10, 10, 18, 18, 10, 10, 18, 18],
        y: [20, 25, 20, 25, 20, 25, 20, 25],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_6: [
      {
        x: [20, 20, 30, 30, 20, 20, 30, 30],
        y: [20, 25, 20, 25, 20, 25, 20, 25],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [20, 20, 28, 28, 20, 20, 28, 28],
        y: [20, 25, 20, 25, 20, 25, 20, 25],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_7: [
      {
        x: [0, 0, 10, 10, 0, 0, 10, 10],
        y: [25, 30, 25, 30, 25, 30, 25, 30],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [0, 0, 8, 8, 0, 0, 8, 8],
        y: [25, 30, 25, 30, 25, 30, 25, 30],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_8: [
      {
        x: [10, 10, 20, 20, 10, 10, 20, 20],
        y: [25, 30, 25, 30, 25, 30, 25, 30],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [10, 10, 18, 18, 10, 10, 18, 18],
        y: [25, 30, 25, 30, 25, 30, 25, 30],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_9: [
      {
        x: [20, 20, 30, 30, 20, 20, 30, 30],
        y: [25, 30, 25, 30, 25, 30, 25, 30],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [20, 20, 28, 28, 20, 20, 28, 28],
        y: [25, 30, 25, 30, 25, 30, 25, 30],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_10: [
      {
        x: [0, 0, 10, 10, 0, 0, 10, 10],
        y: [30, 35, 30, 35, 30, 35, 30, 35],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [0, 0, 8, 8, 0, 0, 8, 8],
        y: [30, 35, 30, 35, 30, 35, 30, 35],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_11: [
      {
        x: [10, 10, 20, 20, 10, 10, 20, 20],
        y: [30, 35, 30, 35, 30, 35, 30, 35],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [10, 10, 18, 18, 10, 10, 18, 18],
        y: [30, 35, 30, 35, 30, 35, 30, 35],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_12: [
      {
        x: [20, 20, 30, 30, 20, 20, 30, 30],
        y: [30, 35, 30, 35, 30, 35, 30, 35],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [20, 20, 28, 28, 20, 20, 28, 28],
        y: [30, 35, 30, 35, 30, 35, 30, 35],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_13: [
      {
        x: [0, 0, 10, 10, 0, 0, 10, 10],
        y: [35, 40, 35, 40, 35, 40, 35, 40],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [0, 0, 8, 8, 0, 0, 8, 8],
        y: [35, 40, 35, 40, 35, 40, 35, 40],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_14: [
      {
        x: [10, 10, 20, 20, 10, 10, 20, 20],
        y: [35, 40, 35, 40, 35, 40, 35, 40],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [10, 10, 18, 18, 10, 10, 18, 18],
        y: [35, 40, 35, 40, 35, 40, 35, 40],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
    result_15: [
      {
        x: [20, 20, 30, 30, 20, 20, 30, 30],
        y: [35, 40, 35, 40, 35, 40, 35, 40],
        z: [0, 0, 0, 0, 13, 13, 13, 13],
      },

      {
        x: [20, 20, 28, 28, 20, 20, 28, 28],
        y: [35, 40, 35, 40, 35, 40, 35, 40],
        z: [13, 13, 13, 13, 20, 20, 20, 20],
      },
    ],
  };
</script>

<script>
  class Box {
    constructor(x, y, z, op = 1, custom_color = "rgb(0, 0, 255)") {
      var intensity = [0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1];
      var white = "rgb(255, 255, 255)";
      var custom_color = custom_color;
      this.data = {
        x: x,
        y: y,
        z: z,
        i: [0, 3, 4, 7, 0, 6, 1, 7, 0, 5, 2, 7],
        j: [1, 2, 5, 6, 2, 4, 3, 5, 4, 1, 6, 3],
        k: [3, 0, 7, 4, 6, 0, 7, 1, 5, 0, 7, 2],
        intensity: intensity,
        colorscale: [
          [0, white],
          [1, custom_color],
        ],
        showscale: false,
        opacity: op,
        flatshading: true, // important
        lighting: {
          facenormalsepsilon: 0, // important
        },
        lightposition: {
          x: 2000,
          y: 1000,
        },
        type: "mesh3d",
        // name: "cube",
      };
    }
  }
  data = [];
  const obj1 = new Box(
    [0, 30, 0, 30, 0, 30, 0, 30],
    [0, 0, 40, 40, 0, 0, 40, 40],
    [0, 0, 0, 0, 20, 20, 20, 20],
    0.2
  );
  data.push(obj1.data);

  var gd = document.getElementById("graphDiv");

  var number = 1
  Object.entries(total_result).forEach((entry) => {
    const [key, val] = entry;
    val.forEach((element) => {
      const obj = new Box(element.x, element.y, element.z);
      data.push(obj.data);
    });
    $("#check-box-area").append(`
      <input type = "checkbox" checked class = "stack" value = ${key}><span> Stack No. ${number++}</span> <br>
    `);
  });

  function load_data() {
    let stack_name = [];
    $(".stack:checked").each(function () {
      stack_name.push($(this).val());
    });
    // alert(stack_name.length);
    let data = [];
    const container = new Box(
      [0, 30, 0, 30, 0, 30, 0, 30],
      [0, 0, 40, 40, 0, 0, 40, 40],
      [0, 0, 0, 0, 20, 20, 20, 20],
      0.2
    );
    data.push(container.data);
    stack_name.forEach((stack) => {
      total_result[stack].forEach((element) => {
        const obj = new Box(element.x, element.y, element.z);
        data.push(obj.data);
      });
    });
    gd.data = data;
    Plotly.redraw(gd);
  }

  Plotly.newPlot(gd, {
    data: data,
    layout: { height: $("#graphDiv").height() },
  });
  $(document).ready(function () {
    $(".stack").click(function () {
      load_data();
    });

    $("#check-all").click(() => {
      $(".stack").removeAttr("checked");
      $(".stack").attr("checked", $("#check-all").prop("checked"));
      load_data();
    });

    // $("#check-all").click(
    //   () => {
    //     $(".stack").attr("checked", "checked");
    //     // $(this).val("uncheck all");
    //   },
    //   () => {
    //     $(".stack").removeAttr("checked");
    //     // $(this).val("check all");
    //   }
    // );
  });

  window.onresize = function () {
    // let width = $("#graphDiv").width();
    // let height = $("#graphDiv").height();
    var update = {
      width: $("#graphDiv").width(), // or any new width
      height: $("#graphDiv").height(), // " "
    };
    Plotly.relayout("graphDiv", update);
    // Plotly.redraw(gd);
  };
</script>
